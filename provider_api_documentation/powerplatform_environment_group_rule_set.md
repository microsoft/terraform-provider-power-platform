---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "powerplatform_environment_group_rule_set Resource - Power Platform"
subcategory: ""
description: |-
  Allows the creation of environment group rulesets. See Power Platform documentation https://learn.microsoft.com/power-platform/admin/environment-groups for more information on the available rules that can be applied to an environment group.
  Note: This resource is available as preview
  Known Limitations: This resource is not supported for with service principal authentication.
---

# powerplatform_environment_group_rule_set (Resource)

Allows the creation of environment group rulesets. See [Power Platform documentation](https://learn.microsoft.com/power-platform/admin/environment-groups) for more information on the available rules that can be applied to an environment group.

**Note:** This resource is available as **preview**

**Known Limitations:** This resource is not supported for with service principal authentication.

## Example Usage

```terraform
terraform {
  required_providers {
    powerplatform = {
      source = "microsoft/power-platform"
    }
  }
}

provider "powerplatform" {
  use_cli = true
}

resource "powerplatform_environment_group" "example_group" {
  display_name = "example_environment_group_ruleset"
  description  = "Example environment group"
}

resource "powerplatform_environment_group_rule_set" "example_group_rule_set" {
  environment_group_id = powerplatform_environment_group.example_group.id
  rules = {
    sharing_controls = {
      share_mode      = "exclude sharing with security groups"
      share_max_limit = 42
    }
    usage_insights = {
      insights_enabled = false
    }
    maker_welcome_content = {
      maker_onboarding_url      = "https://contoso.com/onboarding"
      maker_onboarding_markdown = "## Welcome to the environment!\n\n**This is a markdown description.**"
    }
    solution_checker_enforcement = {
      solution_checker_mode = "block"
      send_emails_enabled   = true
    }
    backup_retention = {
      period_in_days = 21
    }
    ai_generated_descriptions = {
      ai_description_enabled = false
    }
    ai_generative_settings = {
      move_data_across_regions_enabled = true
      bing_search_enabled              = false
    }
  }
}
```

## API Endpoints

| Terraform Operation | HTTP Method | API Endpoint URL (Public Cloud) |
| ------------------- | ----------- | -------------------------------- |
| Create              | `PUT`       | `https://api.bap.microsoft.com/providers/Microsoft.BusinessAppPlatform/scopes/admin/environmentGroups/{environment_group_id}/rulesets/{ruleset_id}?api-version=2023-06-01-preview` |
| Read                | `GET`       | `https://api.bap.microsoft.com/providers/Microsoft.BusinessAppPlatform/scopes/admin/environmentGroups/{environment_group_id}/rulesets/{ruleset_id}?api-version=2023-06-01-preview` |
| Update              | `PUT`       | `https://api.bap.microsoft.com/providers/Microsoft.BusinessAppPlatform/scopes/admin/environmentGroups/{environment_group_id}/rulesets/{ruleset_id}?api-version=2023-06-01-preview` |
| Delete              | `DELETE`    | `https://api.bap.microsoft.com/providers/Microsoft.BusinessAppPlatform/scopes/admin/environmentGroups/{environment_group_id}/rulesets/{ruleset_id}?api-version=2023-06-01-preview` |

## Attribute Mapping

| Resource Attribute                            | API Response JSON Field                             |
| --------------------------------------------- | --------------------------------------------------- |
| `id`                                          | `id`                                                |
| `environment_group_id`                        | from request path `{environment_group_id}`          |
| `rules.sharing_controls.share_mode`           | `properties.rules.sharingControls.shareMode`        |
| `rules.sharing_controls.share_max_limit`      | `properties.rules.sharingControls.shareMaxLimit`    |
| `rules.usage_insights.insights_enabled`       | `properties.rules.usageInsights.insightsEnabled`    |
| `rules.maker_welcome_content.maker_onboarding_url`      | `properties.rules.makerWelcomeContent.makerOnboardingUrl`      |
| `rules.maker_welcome_content.maker_onboarding_markdown` | `properties.rules.makerWelcomeContent.makerOnboardingMarkdown` |
| `rules.solution_checker_enforcement.solution_checker_mode` | `properties.rules.solutionCheckerEnforcement.solutionCheckerMode` |
| `rules.solution_checker_enforcement.send_emails_enabled`  | `properties.rules.solutionCheckerEnforcement.sendEmailsEnabled`  |
| `rules.backup_retention.period_in_days`       | `properties.rules.backupRetention.periodInDays`     |
| `rules.ai_generated_descriptions.ai_description_enabled` | `properties.rules.aiGeneratedDescriptions.aiDescriptionEnabled` |
| `rules.ai_generative_settings.move_data_across_regions_enabled` | `properties.rules.aiGenerativeSettings.moveDataAcrossRegionsEnabled` |
| `rules.ai_generative_settings.bing_search_enabled`        | `properties.rules.aiGenerativeSettings.bingSearchEnabled`        |

### Example API Response

An example of the API response used by this resource can be found in the test fixture [`environment_group_rule_set/Validate_Create/get_rule_set.json`](https://github.com/microsoft/terraform-provider-power-platform/blob/main/internal/services/environment_group_rule_set/tests/Validate_Create/get_rule_set.json).
