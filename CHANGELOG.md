# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).


## 3.9.0 - 2025-10-01

### üí´ Changed

* [#928](https://github.com/microsoft/terraform-provider-power-platform/issues/928) Enhanced powerplatform_connectors data source to support filtering by environment_id
* [#910](https://github.com/microsoft/terraform-provider-power-platform/issues/910) Extended powerplatform_environment_settings resource to support new AI-powered features including Copilot Studio settings, PowerApps Maker Bot, AI form fill capabilities, and natural language search features

### ü™≤ Fixed

* [#877](https://github.com/microsoft/terraform-provider-power-platform/issues/877) update API permissions for Power Platform Provider documentation
* [#878](https://github.com/microsoft/terraform-provider-power-platform/issues/878) update power catalog audience setting validation to include SpecificAdmins option and correct string validator option

## 3.8.0 - 2025-07-03

### ‚ú® Added

* [#828](https://github.com/microsoft/terraform-provider-power-platform/issues/828) Add support for Azure Developer CLI authentication via use_dev_cli provider configuration option and POWER_PLATFORM_USE_DEV_CLI environment variable
* [#782](https://github.com/microsoft/terraform-provider-power-platform/issues/782) Add powerplatform_environment_application_admin resource to enable adding Entra service principals as application users with System Administrator role in Dataverse environments
* [#781](https://github.com/microsoft/terraform-provider-power-platform/issues/781) support partner_id configuration and opt-out for default Terraform partner ID

### üí´ Changed

* [#867](https://github.com/microsoft/terraform-provider-power-platform/issues/867) powerplatform_tenant_capacity resource is now available in preview with user authentication support only
* [#823](https://github.com/microsoft/terraform-provider-power-platform/issues/823) Improved error message formatting and consistency for better user experience across environment templates, tenant isolation policy, and tenant settings resources

### ‚ö∞Ô∏è Deprecated

* [#860](https://github.com/microsoft/terraform-provider-power-platform/issues/860) Mark powerplatform_rest resource as deprecated. Known uses do not align with the intent of the resource. Please consider using specific resources for your use case, or opening a GitHub issue requesting a new resource for your use case.

### ü™≤ Fixed

* [#806](https://github.com/microsoft/terraform-provider-power-platform/issues/806) Improved error handling in environment group services - fixed missing error wrapping, silent failures, and incorrect error messages
* [#804](https://github.com/microsoft/terraform-provider-power-platform/issues/804) Fix pointer handling issues across codebase for better Go idioms
* [#825](https://github.com/microsoft/terraform-provider-power-platform/issues/825) Fixed type safety and formatting issues including missing string validation, interface assertions, and escaped newline formatting
* [#798](https://github.com/microsoft/terraform-provider-power-platform/issues/798) Fixed duplicated constants and literals issues across codebase to improve maintainability
* [#808](https://github.com/microsoft/terraform-provider-power-platform/issues/808) Fixed recursive retry loops and missing return statements in environment services that could lead to infinite loops and data corruption. Added proper error wrapping for better debugging context.
* [#810](https://github.com/microsoft/terraform-provider-power-platform/issues/810) fix: add proper API error wrapping and data conversion context across multiple services
* [#812](https://github.com/microsoft/terraform-provider-power-platform/issues/812) fix: improve error handling for retry loops, state management, validators, and diagnostic reporting across 9 critical components to prevent silent failures and data corruption
* [#814](https://github.com/microsoft/terraform-provider-power-platform/issues/814) Fixed missing return statements after error handling in three datasources to prevent potential panics and undefined behavior
* [#815](https://github.com/microsoft/terraform-provider-power-platform/issues/815) Add missing nil pointer validation checks to prevent runtime panics in application API client, authorization resource, and environment models
* [#816](https://github.com/microsoft/terraform-provider-power-platform/issues/816) Improved error handling and diagnostics across multiple services: fixed missing parameter context in connection shares error messages, proper error propagation in DLP policy helper functions, handled ignored errors in data record column conversion, and corrected misleading error messages in environment settings
* [#817](https://github.com/microsoft/terraform-provider-power-platform/issues/817) Fixed JSON Marshal/Unmarshal issues: added empty response body validation, proper error handling for JSON marshaling, safe type assertions, and corrected Decode usage
* [#818](https://github.com/microsoft/terraform-provider-power-platform/issues/818) Fixed infinite polling loop in environment wave UpdateFeature method by adding context deadline checking to respect timeout configuration
* [#820](https://github.com/microsoft/terraform-provider-power-platform/issues/820) Improve code structure and maintainability by extracting deeply nested schema definitions into helper functions, reducing duplication in DTO conversion logic, and enhancing error handling for feature state mapping
* [#821](https://github.com/microsoft/terraform-provider-power-platform/issues/821) Fixed validation and modifiers issues: improved error handling in validators and plan modifiers, corrected error messages for SHA256 checksums, and enhanced diagnostic context
* [#824](https://github.com/microsoft/terraform-provider-power-platform/issues/824) Fix configuration and constants issues: CAE challenge detection strings, RX PowerApps Advisor API domain constants, and AuxiliaryTenantIDs type safety conversion
* [#839](https://github.com/microsoft/terraform-provider-power-platform/issues/839) Fixed type assertion safety issues in multiple services to prevent potential runtime panics when API responses have unexpected structure or types
* [#840](https://github.com/microsoft/terraform-provider-power-platform/issues/840) Fixed type assertion safety issues in DTO conversions and data transformations to prevent runtime panics. Added proper error handling for type assertions in tenant_settings, environment_group_rule_set, dlp_policy, and data_record services. Improved UUID type equality method to support both value and pointer types.
* [#841](https://github.com/microsoft/terraform-provider-power-platform/issues/841) Fixed unsafe type assertions in provider data handling that could cause panics and misleading error messages
* [#842](https://github.com/microsoft/terraform-provider-power-platform/issues/842) Fixed reflection and type safety issues in provider code. Replaced unsafe reflection usage in API client, improved error handling with Go 1.13+ patterns, and added validation for conversion functions to prevent runtime panics.
* [#808](https://github.com/microsoft/terraform-provider-power-platform/issues/808) Fix recursive retry loops and missing return statements after AddError in environment services

## 3.7.2 - 2025-05-16

### ü™≤ Fixed

* [#775](https://github.com/microsoft/terraform-provider-power-platform/issues/775) Fixed issue when powerplatform_environment security_group_id validates unknown values incorrectly

## 3.7.1 - 2025-05-13

### ü™≤ Fixed

* [#702](https://github.com/microsoft/terraform-provider-power-platform/issues/702) Fix retryAfter function to properly handle all formats of Retry-After HTTP header as defined in RFC 7231
* [#705](https://github.com/microsoft/terraform-provider-power-platform/issues/705) Replace panic with error handling in environment_settings models.go
* [#707](https://github.com/microsoft/terraform-provider-power-platform/issues/707) Added nil check for HTTP response in doRequest method to prevent potential nil pointer dereference
* [#708](https://github.com/microsoft/terraform-provider-power-platform/issues/708) Improve DeleteEnvironment function behavior: Handle 404 responses gracefully and adjust state management in Delete method
* [#710](https://github.com/microsoft/terraform-provider-power-platform/issues/710) Fixed improper error handling by replacing err.Error() calls with properly wrapped errors using fmt.Errorf() with %w verb or directly passing the error object. This preserves error context and enables better debugging.
* [#687](https://github.com/microsoft/terraform-provider-power-platform/issues/687) Fixed an issue where required field validation could fail incorrectly if the referenced field was missing or not unique in the configuration.
* [#749](https://github.com/microsoft/terraform-provider-power-platform/issues/749) Nil pointer dereference in regex validation.
* [#704](https://github.com/microsoft/terraform-provider-power-platform/issues/704) Replaced panic with proper error handling in ExecuteApiRequest function
* [#756](https://github.com/microsoft/terraform-provider-power-platform/issues/756) fix: refine current value check in MakeFieldRequiredWhenOtherFieldDoesNotHaveValueValidator
* [#767](https://github.com/microsoft/terraform-provider-power-platform/issues/767) feat: implement conflict handling and retry logic for environment operations

### üìö Documentation

* [#768](https://github.com/microsoft/terraform-provider-power-platform/issues/768) documentation for governance

## 3.7.0 - 2025-04-29

### ‚ú® Added

* [#719](https://github.com/microsoft/terraform-provider-power-platform/issues/719) Operation lifecycle operation continue on HTTP 409 responses

### üí´ Changed

* [#736](https://github.com/microsoft/terraform-provider-power-platform/issues/736) Include debug symbols in goreleaser builds by removing -s -w flags from ldflags

### ü™≤ Fixed

* [#720](https://github.com/microsoft/terraform-provider-power-platform/issues/720) Corrected validator logic in OtherFieldRequiredWhenValueOfValidator to properly handle field comparison cases
* [#703](https://github.com/microsoft/terraform-provider-power-platform/issues/703) Updated StringSliceToSet function to return an error instead of panicking when conversion fails
* [#706](https://github.com/microsoft/terraform-provider-power-platform/issues/706) Replace panic calls with proper error handling in tenant_settings dto.go
* [#709](https://github.com/microsoft/terraform-provider-power-platform/issues/709) Fixed misleading error message and debug log typos in the User resource
* [#745](https://github.com/microsoft/terraform-provider-power-platform/issues/745) fix: add http.StatusConflict to API response handling in enterprise and managed environment services

### üìö Documentation

* [#741](https://github.com/microsoft/terraform-provider-power-platform/issues/741) Add security considerations guide

## 3.6.0 - 2025-04-24

### ‚ú® Added

* [#652](https://github.com/microsoft/terraform-provider-power-platform/issues/652) new `powerplatform_environment_wave` that allows to install newest wave update in an environment. Currently available only with `user authentication login`
* [#306](https://github.com/microsoft/terraform-provider-power-platform/issues/306) Added Continuous Access Evaluation (CAE) checks

### üí´ Changed

* [#636](https://github.com/microsoft/terraform-provider-power-platform/issues/636) Updated resources with new default values
### ü™≤ Fixed

* [#670](https://github.com/microsoft/terraform-provider-power-platform/issues/670) Added custom error message for lack of management application permissions
* [#673](https://github.com/microsoft/terraform-provider-power-platform/issues/673) standardize the logging and error messages by replacing `ProviderTypeName` with `FullTypeName`
* [#686](https://github.com/microsoft/terraform-provider-power-platform/issues/686) Update authorization header check in doRequest function
* [#693](https://github.com/microsoft/terraform-provider-power-platform/issues/693) Add support for HTTP status code 499 in AddDataverseToEnvironment function
* [#698](https://github.com/microsoft/terraform-provider-power-platform/issues/698) Improved file hashing to check if file is a real file and not a symbolic link
* [#709](https://github.com/microsoft/terraform-provider-power-platform/issues/709) Fixed incorrect error message in `powerplatform_user` delete operation
* [#714](https://github.com/microsoft/terraform-provider-power-platform/issues/714) Enhance error handling for 403 & 404 WebApi responses

### üìö Documentation

* [#679](https://github.com/microsoft/terraform-provider-power-platform/issues/679) added documentation how to turn off Azure CLI telemetry
* [#695](https://github.com/microsoft/terraform-provider-power-platform/issues/695) adding documentation and samples for Azure DevOps authentication with Workload Identity Federation.

## 3.5.0 - 2025-03-20

### ‚ú® Added

* [#566](https://github.com/microsoft/terraform-provider-power-platform/issues/566) Added the auxiliary tenant property to supported auth options
* [#612](https://github.com/microsoft/terraform-provider-power-platform/issues/612) new `tenant_isolation_policy` resource to enforce tenant isolation settings
* [#574](https://github.com/microsoft/terraform-provider-power-platform/issues/574) new `powerplatform_solution_checker_rules` datasource for retrieving solution checker validation rules
* [#486](https://github.com/microsoft/terraform-provider-power-platform/issues/486) new `powerplatform_analytics_data_exports` data source

### üí´ Changed

* [#650](https://github.com/microsoft/terraform-provider-power-platform/issues/650) updated descriptions for attributes

### ü™≤ Fixed

* [#616](https://github.com/microsoft/terraform-provider-power-platform/issues/616) `powerplatform_data_record`: added meaningful error when record already exist and HTTP 405 is returned
* [#621](https://github.com/microsoft/terraform-provider-power-platform/issues/621) Lifecycle operation will retry if 'Failed' status was return.
* [#622](https://github.com/microsoft/terraform-provider-power-platform/issues/622) `powerplatform_user`: added retry when user is not yet added to the dataverse

### üìö Documentation

* [#608](https://github.com/microsoft/terraform-provider-power-platform/issues/608) Added dynamic configuration guide to user documentation

## 3.4.0 - 2025-03-06

### ‚ú® Added

* [#243](https://github.com/microsoft/terraform-provider-power-platform/issues/243) Added Managed identity and Workload Identity Federation authentication
* [#548](https://github.com/microsoft/terraform-provider-power-platform/issues/548) `powerplatform_environment` added explicit error when cannot provision new environment in a selected azure region
* [#551](https://github.com/microsoft/terraform-provider-power-platform/issues/551) added new `powerplatform_copilot_studio_application_insights` resource
* [#116](https://github.com/microsoft/terraform-provider-power-platform/issues/116) `powerplatform_managed_environment` adding `solution_checker_rule_overrides` attribute that allows defining solution checker rules when enabling managed environment
* [#568](https://github.com/microsoft/terraform-provider-power-platform/issues/568) `powerplatform_environment` enhance support for creating developer environment on behalf of a user
* [#572](https://github.com/microsoft/terraform-provider-power-platform/issues/572) `powerplatform_environment` support get new features early with new `release_cycle` attribute
* [#576](https://github.com/microsoft/terraform-provider-power-platform/issues/576) `powerplatform_environment_settings` adding additional IP firewall settings
* [#589](https://github.com/microsoft/terraform-provider-power-platform/issues/589) `powerplatform_environment` adding `allow_bing_search` and `allow_moving_data_across_regions` attributes

### üí´ Changed

* [#604](https://github.com/microsoft/terraform-provider-power-platform/issues/604) `powerplatform_environment` attributes `environment_group_id` and `billing_policy_id` uses empty guid `00000000-0000-0000-0000-000000000000` as no value, instead of ""

### ü™≤ Fixed

* [#557](https://github.com/microsoft/terraform-provider-power-platform/issues/557) `powerplatform_data_record` adding warning when something else than set is used for columns dynamic attribute
* [#565](https://github.com/microsoft/terraform-provider-power-platform/issues/565) Fixed issues with `powerplatform_environment_group_rule_set` throwing RuleSetInvalid error
* [#595](https://github.com/microsoft/terraform-provider-power-platform/issues/595) `powerplatform_environment` fixing bug that updating display_name field triggers manager environment to enable itself

### üìö Documentation

* [#538](https://github.com/microsoft/terraform-provider-power-platform/issues/538) Improve documentation around powerplatform_environment_application_package_install resource
* [#584](https://github.com/microsoft/terraform-provider-power-platform/issues/584) Correct `telemetry_optout` documentation about User-Agent header

## 3.3.0 - 2024-11-28

### ‚ú® Added

* [#478](https://github.com/microsoft/terraform-provider-power-platform/issues/478) adding powerplatform_enterprise_policy resource
* [#488](https://github.com/microsoft/terraform-provider-power-platform/issues/488) powerplatform_user - added support for adding user to environments without dataverse created.
* [#431](https://github.com/microsoft/terraform-provider-power-platform/issues/431) powerplatform_environment_settings adding log_retention_period_in_days.

### üí´ Changed

* [#508](https://github.com/microsoft/terraform-provider-power-platform/issues/508) powerplatform_environment - removed 'known-after-apply' state for attributes that do not change during update

### ü™≤ Fixed

* [#518](https://github.com/microsoft/terraform-provider-power-platform/issues/518) powerplatform_data_loss_prevention_policy added additional validation for default_action_rule_behavior and action_rules when both are empty

### üìö Documentation

* [#513](https://github.com/microsoft/terraform-provider-power-platform/issues/513) Added documentation to environment_settings to mention using data_record and data_records to get environment settings from Dataverse

## 3.2.0 - 2024-10-29

### ‚ú® Added

* [#423](https://github.com/microsoft/terraform-provider-power-platform/issues/423) adding powerplatform_environment_group_rule_set. **Currently not supported when using service principal authentication**

### ü™≤ Fixed

* [#499](https://github.com/microsoft/terraform-provider-power-platform/issues/499) Fixing issue that dlp policies does not apply all connectors and require reapply
* [#502](https://github.com/microsoft/terraform-provider-power-platform/issues/502) powerplatform_environment fixed error during environment update when a custom domain is set

### üìö Documentation

* [#414](https://github.com/microsoft/terraform-provider-power-platform/issues/414) Improved documentation of `data_record` with examples for app users, business units, teams, and roles

## 3.1.0 - 2024-10-02

### ‚ú® Added

* [#471](https://github.com/microsoft/terraform-provider-power-platform/issues/471) adding `unique_name` to `powerplatform_environments` & `powerplatform_environment`
* [#467](https://github.com/microsoft/terraform-provider-power-platform/issues/467) added `disable_on_destroy` attribute to `powerplatform_record`

### ü™≤ Fixed

* [#468](https://github.com/microsoft/terraform-provider-power-platform/issues/468) `powerplatform_environment`: `environment_type` change triggers update not recreate
* [#477](https://github.com/microsoft/terraform-provider-power-platform/issues/477) Fixed `powerplatform_rest` resources that only have a destroy
* [#474](https://github.com/microsoft/terraform-provider-power-platform/issues/474) powerplatform_data_record invalid character '<' error when running apply

## 3.0.0 - 2024-09-24

### üí• Breaking

* [#458](https://github.com/microsoft/terraform-provider-power-platform/issues/458) `powerplatform_solution.settings_file_checksum` is now generated using SHA256 instead of MD5.
* [#458](https://github.com/microsoft/terraform-provider-power-platform/issues/458) `powerplatform_solution.solution_file_checksum` is now generated using SHA256 instead of MD5.
* [#399](https://github.com/microsoft/terraform-provider-power-platform/issues/399) `powerplatform_tenant_settings.id` is now set to the tenant id instead of a random guid.  This will cause a change in the id value of existing resources.
* [#412](https://github.com/microsoft/terraform-provider-power-platform/issues/412) Removed `powerplatform_solution.solution_name` property because it is no longer required or used by implementation
* [#457](https://github.com/microsoft/terraform-provider-power-platform/issues/457) Removed `id` attribute from datasource_tenant_application_packages, datasource_securityroles, datasource_connection_shares, datasource_connections, datasource_connectors, datasource_currencies, datasource_dlp_policy, datasource_environments, datasource_environment_settings, datasource_environment_templates, datasource_languages, datasource_billing_policies, datasource_locations, datasource_environment_powerapps, datasource_solutions, datasource_tenant_settings

### ‚ú® Added

* [#399](https://github.com/microsoft/terraform-provider-power-platform/issues/399) Environment Routing configuration added to `powerplatform_tenant_settings`
* [#401](https://github.com/microsoft/terraform-provider-power-platform/issues/401) `powerplatform_tenant` data source added to get information about current tenant
* [#401](https://github.com/microsoft/terraform-provider-power-platform/issues/401) `powerplatform_tenant_capcity` data source added for capacity information
* [#408](https://github.com/microsoft/terraform-provider-power-platform/issues/408) User defined timeouts implemented for all resources
* [#393](https://github.com/microsoft/terraform-provider-power-platform/issues/393) `powerplatform_environment_group` resource added to support basic creation of environment groups (no rules yet)

### üí´ Changed

* [#458](https://github.com/microsoft/terraform-provider-power-platform/issues/458) `powerplatform_rest.expected_http_status` type is changed from []int64 to []int.  Practically, this should not affect any existing configurations.
* [#458](https://github.com/microsoft/terraform-provider-power-platform/issues/458) `powerplatform_rest_query.expected_http_status` type is changed from []int64 to []int.  Practically, this should not affect any existing configurations.

### ü™≤ Fixed

* [#376](https://github.com/microsoft/terraform-provider-power-platform/issues/376) Fixed timeout error in `powerplatform_billing_policy`
* [#452](https://github.com/microsoft/terraform-provider-power-platform/issues/452) Fixed authentication error when calling `powerplatform_rest` or `powerplatform_rest_query` on newly created environment
