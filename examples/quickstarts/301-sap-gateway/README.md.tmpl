# SAP Gateway (301 level)

This Terraform module aims to provide a fully managed infrastructure that integrates Microsoft's Power Platform and Azure services. Utilizing both powerplatform and azurerm Terraform providers, this module encapsulates best practices and serves as a reference architecture for scalable, reliable, and manageable cloud infrastructure.

## Prerequisites

- Azure subscription
- SAP S/4HANA system
- Power Platform environment
- Service Principal with appropriate permissions (see below)

{{ .ModuleDetails }}

## Usage

Include this module in your Terraform scripts as follows:

```hcl

module "sap_gateway" {
  source            = "./quickstarts/{{ .ModuleName }}"
}

```

## Detailed Behavior

### On-Premise Data Gateway

todo: describe

### Gateway Principal

A service principal is created to allow the on-premise data gateway to connect the gateway back to Power Platform.  The service principal is granted the following permissions:
- `Application.Read.All`
- `Application.ReadWrite.All`

### Power Platform Resources

A PowerApps Environment is created

### Network

All resources are provisioned within the same Azure Virtual Network, ensuring that they can communicate securely without exposure to the public internet.

## Limitations and Considerations

- Due to Power Platform limitations, certain resources may not fully support Terraform's state management.
- Make sure to set appropriate RBAC for Azure and Power Platform resources.
- This module is provided as a sample only and is not intended for production use without further customization.

## Additional Resources

- [Power Platform Admin Documentation](https://learn.microsoft.com/en-us/power-platform/admin/)
- [Azure AD Terraform Provider](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/guides/service_principal_configuration)
- https://learn.microsoft.com/en-us/power-platform/admin/wp-onpremises-gateway
